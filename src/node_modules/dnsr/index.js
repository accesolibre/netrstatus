/**
 * DNS resolution.
 * @module dnsr
 */

var dns = require('dns')
var url = require('url')

function getStats (addrs) {
  return {
    resolution: addrs,
    nameservers: dns.getServers()
  }
}

function resolve (opts, callback) {
  var local = {}
  local.uri = opts.url || opts.uri

  local.host = url.parse(local.uri).hostname

  dns.resolve4(local.host, function (err, addresses) {
    if (err) { return callback(err) }

    return callback(null, getStats(addresses))
  })
}
module.exports = resolve
